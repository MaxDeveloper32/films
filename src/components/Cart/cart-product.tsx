import { useState } from 'react';
import { useAppSelector } from '../../hooks/use-app-redux/use-app-redux';
import Modal from '../modal-window/modal';
import CartList from './cart-list/cart-list';
import './cart.css';

const CART_SVG = (
  <svg width="60" height="50" viewBox="0 0 153 149" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M56.2959 100.5C57.8711 106.62 59.3774 112.462 60.9789 118.677C62.4405 118.677 63.9815 118.688 65.5226 118.677C83.1536 118.543 100.785 118.412 118.415 118.283C120.77 118.269 123.13 118.438 125.48 118.617C126.485 118.7 127.475 118.909 128.427 119.24C132.111 120.5 132.741 123.269 130.038 126.117C129.816 126.352 129.607 126.6 129.382 126.855C130.888 127.995 132.325 129.222 133.686 130.531C138.501 135.704 137.529 142.595 131.455 146.245C126.557 149.189 121.56 148.961 116.824 145.917C111.646 142.591 110.659 136.027 114.391 130.848C115.165 129.773 116.106 128.82 117.279 127.454C102.405 127.187 87.9187 126.767 72.6168 127.162C76.2923 129.897 78.558 132.668 78.512 136.704C78.4976 139.434 77.4113 142.049 75.4863 143.986C71.2392 148.401 62.9117 148.37 57.9511 143.996C53.194 139.802 53.6194 133.808 59.3032 126.902C54.5875 126.517 52.3551 123.329 51.1507 119.419C49.8013 115.042 48.9264 110.519 47.7877 106.073C45.3697 96.636 42.6906 87.2589 40.524 77.7643C36.8105 61.487 33.4061 45.1442 29.8763 28.8257C29.1655 25.5401 28.4048 22.2626 27.8063 18.9559C27.7154 18.2946 27.4302 17.6751 26.9869 17.176C26.5436 16.6769 25.9621 16.3208 25.3161 16.1527C20.0542 14.2172 14.8192 12.2094 9.58821 10.1925C7.37209 9.40051 5.19837 8.4947 3.07547 7.47902C0.71659 6.27593 -0.0356972 4.34564 0.831325 2.55647C1.65043 0.865081 3.26646 0.345203 5.78286 1.15053C11.0165 2.82485 16.2232 4.58329 21.447 6.28714C24.0067 7.12132 26.5605 7.96478 29.1452 8.70644C32.0862 9.55049 33.9809 11.2594 34.7495 14.333C36.6529 21.9406 38.6876 29.5156 40.6625 37.1081C40.9973 38.3932 41.3136 39.6837 41.6805 41.1375C44.7075 41.1375 47.604 41.1662 50.4997 41.1301C53.8674 41.0875 57.2351 40.9183 60.6021 40.9333C63.4992 40.9478 65.0725 42.0432 65.1965 43.8724C65.3278 45.7404 63.5701 47.248 60.6369 47.3301C56.3753 47.4502 52.1045 47.3136 47.8383 47.2913C46.4042 47.2841 44.9695 47.2913 42.9775 47.2913L54.4273 92.1722H123.686L143.256 45.8886C139.515 45.7153 136.215 45.5637 132.913 45.4081C131.12 45.3241 129.311 45.3557 127.538 45.1187C125.069 44.7906 123.929 43.6369 123.957 41.8464C123.984 40.1517 124.909 39.0812 127.378 38.8803C131.622 38.5344 135.892 38.4384 140.152 38.3958C142.276 38.3741 144.41 38.9032 146.528 38.8316C150.657 38.6918 152.277 41.6639 152.11 46.6455C151.963 47.9861 151.566 49.287 150.938 50.481C147.412 58.357 143.777 66.1819 140.281 74.0697C137.557 80.217 134.871 86.3866 132.394 92.6362C131.259 95.3167 129.585 97.7353 127.475 99.7417C126.653 100.498 125.629 100.999 124.528 101.186C122.656 101.528 120.755 101.686 118.851 101.654C100.999 101.301 83.1464 100.881 65.2982 100.504C62.4077 100.447 59.5126 100.5 56.2959 100.5ZM127.65 137.37C127.62 135.676 125.422 133.581 123.609 133.516C122.217 133.466 120.759 135.251 120.734 137.034C120.711 138.764 122.322 140.076 124.432 140.045C126.302 140.018 127.676 138.875 127.65 137.37ZM66.6474 139.183C67.4232 138.586 68.5409 138.128 68.9617 137.311C69.5845 136.098 68.9617 134.923 67.7468 134.226C67.0799 133.823 66.3731 133.489 65.6387 133.229C64.418 132.826 63.1999 132.643 62.5402 134.18C61.9016 135.668 62.2364 137.275 63.5247 138.013C64.5342 138.483 65.5782 138.873 66.6474 139.183Z"
      fill="black"
    />
    <path
      d="M89.5079 57.1721C89.5079 55.3652 89.5296 54.2554 89.504 53.1475C89.1483 37.8964 88.7919 22.6451 88.4342 7.39359C88.3685 6.27388 88.4066 5.15069 88.5464 4.03788C88.8037 2.46267 89.695 1.33494 91.4218 1.24043C92.1569 1.14695 92.9012 1.33286 93.5057 1.76152C94.1108 2.19019 94.5329 2.83029 94.6891 3.55523C95.0048 4.51191 95.2181 5.49978 95.3251 6.5017C95.8206 14.11 96.2512 21.7226 96.7217 29.3322C97.1982 37.0547 97.6918 44.776 98.2011 52.4963C98.2589 53.3699 98.4991 54.231 98.7597 55.6815C100.302 53.9147 101.539 52.5189 102.752 51.1039C104.651 48.89 106.532 46.6618 108.426 44.444C108.718 44.1034 109.024 43.7732 109.345 43.4634C111.408 41.4904 113.752 41.1471 115.331 42.5766C117.079 44.1597 116.995 46.6119 114.978 48.8467C110.246 54.0915 105.456 59.2856 100.702 64.5107C99.7973 65.5037 98.9402 66.5395 98.0712 67.5641C96.1678 69.8074 94.1633 70.2839 91.5045 69.0481C90.6887 68.674 89.9129 68.2191 89.1883 67.6901C82.7713 62.9429 76.6844 57.8173 71.439 51.7717C70.6028 50.7308 69.9235 49.5726 69.4233 48.334C69.0775 47.6757 68.9849 46.9136 69.1621 46.1916C69.34 45.4695 69.7758 44.8375 70.3875 44.4149C70.95 44.095 71.5709 43.8912 72.2134 43.8155C72.856 43.7399 73.5077 43.794 74.1286 43.9745C75.5142 44.4858 76.6733 45.7183 77.814 46.7659C81.1147 49.7968 84.3511 52.8974 87.6315 55.9507C88.2287 56.3994 88.8555 56.8074 89.5079 57.1721Z"
      fill="black"
    />
  </svg>
);

const CART_GOODS = (
  <svg width="60" height="50" viewBox="0 0 153 149" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M60.7712 118.567C67.0218 118.567 72.8546 118.575 78.6888 118.567C92.5021 118.545 106.316 118.483 120.129 118.517C122.598 118.471 125.064 118.697 127.484 119.191C132.064 120.242 132.793 123.187 129.537 126.63C129.395 126.781 129.35 127.023 129.396 126.923C131.233 128.718 133.225 130.242 134.678 132.174C137.69 136.177 137.13 141.137 133.59 144.691C128.799 149.502 120.179 149.643 115.224 144.991C111.523 141.517 110.977 135.962 113.977 131.465C114.778 130.265 115.815 129.222 117.089 127.684C102.297 127.306 87.8414 127.027 72.5987 127.312C76.4599 130.345 78.9126 133.518 78.2976 138.062C78.0003 140.66 76.7303 143.048 74.7436 144.747C69.9845 148.803 61.7483 148.253 57.2144 143.607C53.0571 139.346 53.6971 133.41 59.1742 127.193C53.0775 126.409 51.4341 121.645 50.0722 116.924C48.7385 112.303 48.0198 107.51 46.8476 102.838C43.9039 91.106 40.6208 79.4547 37.9128 67.6702C34.7256 53.8033 32.0058 39.8287 29.072 25.9026C28.6565 23.9283 27.9563 21.9807 27.8178 19.9907C27.653 17.6647 26.3777 16.709 24.4212 16.0001C19.3588 14.1722 14.3254 12.2643 9.29914 10.3392C7.08288 9.54781 4.91352 8.63123 2.80144 7.59336C0.575141 6.43561 -0.0990266 4.67444 0.638697 2.91217C1.38102 1.13613 3.02187 0.531102 5.48576 1.27998C8.59679 2.22642 11.6796 3.26671 14.7716 4.27485C19.4611 5.80346 24.1238 7.4253 28.8468 8.84034C31.9125 9.75921 33.8653 11.4704 34.6614 14.6785C36.7663 23.1591 39.0194 31.6027 41.2161 40.0603C41.2988 40.378 41.413 40.6872 41.5784 41.2051C42.3969 41.2707 43.2632 41.413 44.1276 41.4018C49.0679 41.3362 54.0069 41.2051 58.9472 41.1486C60.1791 41.1163 61.4113 41.1989 62.6278 41.3954C63.2501 41.4797 63.8256 41.772 64.2607 42.2248C64.6958 42.6776 64.9649 43.2642 65.0243 43.8894C65.1385 44.5066 65.0188 45.1441 64.6887 45.678C64.3585 46.2118 63.8415 46.6037 63.2382 46.7772C62.0982 47.2221 60.8954 47.4847 59.6737 47.555C55.6333 47.6101 51.5909 47.5011 47.5499 47.463C46.2195 47.4499 44.8884 47.463 43.1471 47.463C46.3947 62.6461 50.2651 77.4083 54.5332 92.2914H123.586C130.008 77.0939 136.485 61.7654 143.125 46.0494C138.981 45.8846 135.294 45.76 131.609 45.5815C129.928 45.558 128.251 45.4072 126.593 45.1306C124.646 44.7368 123.681 43.4587 123.836 41.871C124.004 40.1442 125.114 39.3265 126.742 39.1303C128.29 38.8755 129.854 38.7219 131.424 38.6707C136.357 38.7271 141.303 38.722 146.218 39.0921C150.872 39.4426 152.967 42.6488 151.888 47.3121C151.49 48.9446 150.949 50.5388 150.27 52.0753C148.719 55.6773 147.041 59.2241 145.454 62.811C141.01 72.8533 136.51 82.8736 132.206 92.976C131.057 95.5232 129.453 97.8394 127.473 99.8111C126.678 100.597 125.666 101.128 124.568 101.336C122.586 101.7 120.573 101.867 118.558 101.836C101.155 101.493 83.7531 101.111 66.3523 100.691C63.8828 100.635 61.4143 100.527 58.9438 100.479C58.0801 100.463 57.2145 100.557 56.1427 100.61C57.733 106.779 59.2603 112.705 60.7712 118.567ZM123.933 140.217C125.677 140.357 127.335 139.289 127.505 137.915C127.725 136.137 125.502 133.793 123.506 133.698C122.198 133.635 120.839 135.13 120.635 136.852C120.417 138.702 121.729 140.041 123.933 140.218V140.217ZM66.4914 139.363C67.2698 138.772 68.3948 138.322 68.8201 137.506C69.4522 136.299 68.8346 135.117 67.6249 134.414C66.9587 134.01 66.2525 133.675 65.5184 133.414C64.3009 133.009 63.0822 132.812 62.412 134.345C61.7708 135.812 62.1035 137.455 63.3715 138.186C64.3797 138.659 65.4228 139.053 66.4914 139.365V139.363Z"
      fill="black"
    />
    <path
      d="M90.0659 14.9326C88.8779 15.9611 87.8579 16.788 86.9017 17.6826C82.7175 21.5957 78.5662 25.5469 74.3656 29.4396C73.4697 30.2692 72.4924 31.2116 71.3845 31.5496C70.8759 31.6852 70.3436 31.7045 69.827 31.6057C69.3098 31.507 68.8222 31.2929 68.3995 30.9795C67.7884 30.3586 67.6401 28.927 67.8409 27.9654C68.028 27.0676 68.8412 26.223 69.5474 25.5221C76.1594 18.9504 82.791 12.3985 89.443 5.86659C91.4461 3.88904 93.8241 3.69078 96.3089 4.58339C97.8874 5.16761 99.4121 5.88959 100.864 6.74085C106.604 10.0396 112.33 13.366 118.006 16.7731C119.244 17.5371 120.356 18.4891 121.301 19.5952C121.856 20.1699 122.207 20.9114 122.3 21.7052C122.392 22.4991 122.221 23.3011 121.812 23.988C120.954 25.468 119.389 25.6774 117.944 25.3006C116.325 24.893 114.769 24.2602 113.325 23.4204C108.796 20.717 104.358 17.8646 99.8781 15.0778C99.2218 14.6702 98.5392 14.3072 97.4753 13.6994C97.4096 15.1433 97.302 16.294 97.3118 17.4407C97.4615 35.1867 97.6453 52.9326 97.7575 70.6784C97.7732 72.3547 97.5462 74.0244 97.0834 75.6357C96.8688 76.4627 96.3805 77.1925 95.6986 77.7078C95.0166 78.223 94.1811 78.4927 93.3266 78.4731C92.5284 78.4514 91.7586 78.1744 91.1298 77.6828C90.501 77.1912 90.0462 76.5113 89.8315 75.742C89.3537 74.2528 89.1181 72.696 89.1339 71.1319C89.3879 59.5674 89.7672 48.0055 90.0455 36.4408C90.2083 29.7041 90.2601 22.9643 90.3481 16.2257C90.2916 15.7874 90.1971 15.3547 90.0659 14.9326Z"
      fill="black"
    />
  </svg>
);

const SVG_CLOSE_MODAL = (
  <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M18 6L6 18"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
    <path
      d="M6 6L18 18"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
  </svg>
);

const CartProduct = () => {
  const [isCartOpen, setIsCartOpen] = useState(false);
  const cartsQuantity = useAppSelector((state) => state.cart.cartsQuantity);

  const handleToggleCart = () => {
  setIsCartOpen(prev => !prev);
};

  return (
    <section className="cart-product-wrapper">
      <p> Наши предложения </p>
      <div className="cart-product-wrapper__carts-quantity">
        <button onClick={handleToggleCart}>{cartsQuantity === 0 ? CART_SVG : CART_GOODS}</button>

        <span className="cart-product-wrapper__count">{cartsQuantity}</span>
      </div>

      <Modal className="cart-modal" isOpen={isCartOpen} onClose={handleToggleCart}>
        <div className="cart-info ">
          <CartList />
          <button className="cart-info__close" onClick={handleToggleCart}>
            {SVG_CLOSE_MODAL}
          </button>
        </div>
      </Modal>
    </section>
  );
};

export default CartProduct;
